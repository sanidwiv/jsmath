<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
          integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <title>Hello, world!</title>
</head>
<body>
<main role="main" class="container">

    <!-- Addition App -->
    <div id="multiplication_app">
        <!-- carry -->
        <!-- carry row -->
        <!-- carry row -->
        <div class="row mt-1" id="carry-row">
            <div class="col-1 pl-4 pr-4" id="carry-row-1">
            </div>
            <div class="col-1 pl-4 pr-4" id="carry-row-2">
            </div>
            <div class="col-1 pl-4 pr-4" id="carry-row-3">
            </div>
            <div class="col-1 pl-4 pr-4" id="carry-row-4">
            </div>
            <div class="col-1 pl-4 pr-4" id="carry-row-5">
            </div>
            <div class="col-1 pl-4 pr-4" id="carry-row-6">
            </div>
            <div class="col-1 pl-4 pr-4" id="carry-row-7">
            </div>
            <div class="col-1 pl-4 pr-4" id="carry-row-8">
            </div>
            <div class="col-1 pl-4 pr-4" id="carry-row-9">
            </div>
            <div class="col-1 pl-4 pr-4" id="carry-row-10">
            </div>
            <div class="col-1 pl-4 pr-4" id="carry-row-11">
            </div>
            <div class="col-1 pl-4 pr-4" id="carry-row-12">
            </div>
        </div>
        <hr class="border-secondary"/>

        <!-- Number 1 -->
        <div class="row mt-4">
            <div class="col-1" id="num1-row-1">
            </div>
            <div class="col-1" id="num1-row-2">
            </div>
            <div class="col-1" id="num1-row-3">
            </div>
            <div class="col-1" id="num1-row-4">
            </div>
            <div class="col-1" id="num1-row-5">
            </div>
            <div class="col-1" id="num1-row-6">
            </div>
            <div class="col-1" id="num1-row-7">
            </div>
            <div class="col-1" id="num1-row-8">
            </div>
            <div class="col-1" id="num1-row-9">
            </div>
            <div class="col-1" id="num1-row-10">
            </div>
            <div class="col-1" id="num1-row-11">
            </div>
            <div class="col-1" id="num1-row-12">
            </div>
        </div>

        <!-- Number 2 -->
        <div class="row mt-4">
            <div class="col-1" id="num2-row-1">
            </div>
            <div class="col-1" id="num2-row-2">
            </div>
            <div class="col-1" id="num2-row-3">
            </div>
            <div class="col-1" id="num2-row-4">
            </div>
            <div class="col-1" id="num2-row-5">
            </div>
            <div class="col-1" id="num2-row-6">
            </div>
            <div class="col-1" id="num2-row-7">
            </div>
            <div class="col-1" id="num2-row-8">
            </div>
            <div class="col-1" id="num2-row-9">
            </div>
            <div class="col-1" id="num2-row-10">
            </div>
            <div class="col-1" id="num2-row-11">
            </div>
            <div class="col-1" id="num2-row-12">
            </div>
        </div>

        <hr class="border-secondary"/>

        <!-- answer -->
        <div class="row mt-2">
            <div class="col-1" id="answer-row-1">
            </div>
            <div class="col-1" id="answer-row-2">
            </div>
            <div class="col-1" id="answer-row-3">
            </div>
            <div class="col-1" id="answer-row-4">
            </div>
            <div class="col-1" id="answer-row-5">
            </div>
            <div class="col-1" id="answer-row-6">
            </div>
            <div class="col-1" id="answer-row-7">
            </div>
            <div class="col-1" id="answer-row-8">
            </div>
            <div class="col-1" id="answer-row-9">
            </div>
            <div class="col-1" id="answer-row-10">
            </div>
            <div class="col-1" id="answer-row-11">
            </div>
            <div class="col-1" id="answer-row-12">
            </div>
        </div>

    </div>
    <!-- End Addition App -->


    <!-- Input Buttons -->
    <div id="input_buttons">
        <hr class="border-secondary"/>
        <div class="row mb-4 mt-2">
            <div class="col-sm-6">
                <div class="row">
                    <div class="col-1">
                    </div>
                    <div class="col-2">
                        <button class="btn btn-lg btn-primary btn-block" onclick="input(1);">1</button>
                    </div>
                    <div class="col-2">
                        <button class="btn btn-lg btn-primary btn-block" onclick="input(2);">2</button>
                    </div>
                    <div class="col-2">
                        <button class="btn btn-lg btn-primary btn-block" onclick="input(3);">3</button>
                    </div>
                    <div class="col-2">
                        <button class="btn btn-lg btn-primary btn-block" onclick="input(4);">4</button>
                    </div>
                    <div class="col-2">
                        <button class="btn btn-lg btn-primary btn-block" onclick="input(5);">5</button>
                    </div>
                    <div class="col-1">
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="row">
                    <div class="col-1">
                    </div>
                    <div class="col-2">
                        <button class="btn btn-lg btn-primary btn-block" onclick="input(6);">6</button>
                    </div>
                    <div class="col-2">
                        <button class="btn btn-lg btn-primary btn-block" onclick="input(7);">7</button>
                    </div>
                    <div class="col-2">
                        <button class="btn btn-lg btn-primary btn-block" onclick="input(8);">8</button>
                    </div>
                    <div class="col-2">
                        <button class="btn btn-lg btn-primary btn-block" onclick="input(9);">9</button>
                    </div>
                    <div class="col-2">
                        <button class="btn btn-lg btn-primary btn-block" onclick="input(0);">0</button>
                    </div>
                    <div class="col-1">
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- End Input Buttons -->
</main>

<!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
        crossorigin="anonymous"></script>
<script src="js/utils.js"></script>
<script src="js/add.js"></script>
<script>


    // GET params
    var queryDict = {};
    location.search.substr(1).split("&").forEach(function (item) {
        queryDict[item.split("=")[0]] = item.split("=")[1]
    });
    n1 = queryDict['n1'];
    n2 = queryDict['n2'];


    num1 = gen_rand(n1);
    num2 = gen_rand(n2);
    num1_array = num_to_array(num1);
    num2_array = num_to_array(num2);
    answer_array = num_to_array(num1 + num2);

    var carry_answer = [];

    // Compute carry for answer
    ans_length = answer_array.length;
    num1_padded = [...num1_array];
    num2_padded = [...num2_array];
    fill_array(num1_padded,ans_length-n1);
    fill_array(num2_padded,ans_length-n2);

    for (var i = 0; i < ans_length; i++) {
        sum = num1_padded[i] + num2_padded[i];
        if (answer_array[i] == sum) {
            carry_answer.push(0);
        } else {
            if (answer_array[i] > sum) {
                carry_answer.push(answer_array[i] - sum);
            } else {
                carry_answer.push(10 + answer_array[i] - sum);
            }
        }
    }

    // Global variables
    is_carry = false;
    answer_index = answer_array.length-1;
    game_over = false;

    // Start
    init();
    put_blank();
    show_active();
    screen.orientation.lock('landscape');


    //Enable Keyboard in desktops
    document.addEventListener('keydown', function (event) {
        num = parseInt(event.key);
        if (!isNaN(num)) {
            input(num);
        }
    });


</script>
</body>
</html>
